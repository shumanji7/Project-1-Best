<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Welcome!</title>
    <link rel="stylesheet" href="./assets/css/final.css">
</head>
<body style="background-color: #335092;">
    
    
    <header>
        <h1>Are you smarter than a fifth grader?</h1>
    </header>
  
    <nav>

    </nav>
    
    <main style="background-color: #017865; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;" >
        <h1>Welcome!</h1>
        <p>Today you shall embark on a once in a lifetime opportunity by testing your mental skills to their limits. However there's a catch, you only have 1 minute to finish this exam before an atom bomb gets dropped on your head and you fail completely. Fill out the required information below and good luck!</p>
        <div id="info">
            <h2>Student</h2>
            <p>Provide the following information:</p>
            <!-- //added class id to collect info// -->
            <form id="studentForm">
                <label for="student-name">Student Name:</label>
                <input type="text" id="student-name" name="student-name" style="background-color: gold;" required>
        
                <label for="school-name">Select School:</label>
                <select id="school-name" name="school-name" style="background-color: gold;" required>
                    <option value="University of Michigan">University of Michigan</option>
                    <option value="Oxford University">Oxford University</option>
                    <option value="USC">USC</option>
                    <option value="Texas">University of Texas</option>
                </select>
                <button type="submit" id="submitButton">Submit</button>
                
                <table id="previousResults">
                    <thead>
                        <h2 style="text-align: center; color: gold;">Previous Test Results</h2>
                        <tr style="color: aliceblue;">
                            <th>Name</th>
                            <th>School</th>
                            <th>Right Answer</th>
                            <th>Score</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody id="results" style="color: deeppink; background-color: #1a1e4c ;">
                        
                    </tbody>
                </table>
                
                <script>
                    // Retrieve and display previous test results
                    const studentData = JSON.parse(localStorage.getItem('studentGrades')) || [];
                    
                    const resultsBody = document.getElementById('results');


                    studentData.forEach(student => {
                        const row = document.createElement('tr');

                        row.innerHTML = `
                            <td style="text-align: center;">${student.studentName || ''}</td>
                            <td style="text-align: center;">${student.studentSchool || ''}</td>
                            <td style="text-align: center;">${student.studentPercent || ''}</td>
                            <td style="text-align: center;">${student.studentScore || ''}</td>
                            <td style="text-align: center;">${student.studentTime || ''}</td>
                            `;

                    resultsBody.appendChild(row);
                    });

                    //removed the excess
                    // Handle form submission
                    document.getElementById('studentForm').addEventListener('submit', function(event) {
                        event.preventDefault(); // Prevent default form submission

                        const student = {
                            studentName: document.getElementById('student-name').value,
                            studentSchool: document.querySelector('#school-name').value
                        };
                        localStorage.setItem('student', JSON.stringify(student));

                        const isConfirmed = confirm("Are you ready? Timer will begin!");
                        if (isConfirmed) {
                            window.location.href = "./local.html"; // Redirect to next page
                        }
                    });
                </script>
            </form>                
        </div>
    </main>

    <footer>
        <div id="contact">
            <h2>Contact</h2>
            <button id="contactButton">Contact Us</button>        
        </div>
        <script>
            document.getElementById('contactButton').addEventListener('click', function() {
                window.location.href = "./HTML/contact.html";
            });
        </script>
    </footer>
</body>
</html>